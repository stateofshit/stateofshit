# STATE OF SHIT

This file tracks the live state of the VPS, who’s doing what, and notable changes. It’s meant to be updated often with concise entries.

— Standard —
- Keep entries short, timestamped, and factual.
- Use the same sections for each entry so it’s easy to scan.
- Don’t repeat TODO items here; they live in `~/TODOLIST.md`.
- When something changes, add a new entry at the top.

============================================================
Entry: 2025-09-06T18:08:34-04:00
============================================================

Summary
- stateofshit.space is now public with a simple "Coming Soon" landing page. Removed Basic Auth from .space only. HTTPS + redirect remain.

Network + Services
- Updated vhost `/etc/nginx/sites-available/stateofshit.space` (no auth; ACME path open; HTTP→HTTPS redirect).

Artifacts / References
- Landing page: `/var/www/stateofshit-space/index.html`.
- Domains overview updated: `~/DOMAINS.md`.

============================================================
Entry: 2025-09-06T17:38:08-04:00
============================================================

Summary
- Issued TLS for stateofshit.space (root + www). stateofshit.rest: root now points here, but www still points elsewhere; cert deferred until both A records land.

Network + Services
- New vhost for stateofshit.space with a holding page at `/var/www/stateofshit-space`. HTTPS enabled, HTTP→HTTPS redirect via Certbot.
- stateofshit.rest dashboard vhost already live on :80; waiting for DNS of `www.stateofshit.rest` to repoint before issuing cert.

Artifacts / References
- space vhost: `/etc/nginx/sites-available/stateofshit.space`; webroot: `/var/www/stateofshit-space`.
- Domains overview updated: `~/DOMAINS.md`.

Next Steps
- Update DNS so `www.stateofshit.rest` resolves to 147.93.183.152, then run:
  `sudo certbot --nginx -d stateofshit.rest -d www.stateofshit.rest --redirect`

============================================================
Entry: 2025-09-06T17:31:32-04:00
============================================================

Summary
- Public site deployed at https://stateofshit.live with HTTPS via Let’s Encrypt. Nginx serves a styled HTML that renders this Markdown.

Publishing Notes
- Edit source: `~/STATEOFSHIT.md`
- Publish to web: `sudo install -m 0644 ~/STATEOFSHIT.md /var/www/stateofshit/STATEOFSHIT.md`
- The site fetches the Markdown on load; click “Refresh” in the header or reload the page to see updates.
- If needed later, we can automate publishing with a systemd path trigger that copies on change.

System At A Glance (unchanged from prior unless noted)
- Domain: stateofshit.live (and www) — HTTPS enabled, HTTP→HTTPS redirect.
- Web root: `/var/www/stateofshit` (assets and index); Markdown served as plain text at `/STATEOFSHIT.md`.

Recent Changes (this entry)
- Issued and installed TLS cert; enabled redirect to HTTPS.
- Fixed an initial redirect loop by correcting `try_files`.
- Switched the Markdown to a regular file in webroot (no symlink) to avoid 403; added publish command above.

============================================================
Entry: 2025-09-06T17:35:43-04:00
============================================================

Summary
- Prepared `stateofshit.rest` as the main API dashboard (static for now) with Nginx. DNS not yet pointing here; cert pending until DNS cutover.

People / Access
- Same as prior entries. No changes to SSH or users.

System At A Glance
- Added webroot `/var/www/stateofshit-rest` and vhost `/etc/nginx/sites-available/stateofshit.rest` (enabled).

Network + Services
- New site on port 80 for `stateofshit.rest` and `www.stateofshit.rest`.
- Stub endpoints served by Nginx:
  - GET /api/health → 200 {"status":"ok"}
  - GET /api/version → 200 {name, version}

Security Posture
- Reuses existing security/gzip snippets. TLS to be issued after DNS points to this VPS.

Artifacts / References
- Dashboard root: `/var/www/stateofshit-rest/index.html`
- Vhost: `/etc/nginx/sites-available/stateofshit.rest`
- Domains overview: `~/DOMAINS.md`

Next Steps
- Point A and www A for `stateofshit.rest` to 147.93.183.152, then issue TLS with:
  `sudo certbot --nginx -d stateofshit.rest -d www.stateofshit.rest --redirect`

============================================================
Entry: 2025-09-06T17:14:08-04:00
============================================================

Summary
- Fresh VPS baseline complete. Core utilities installed, firewall active, auto updates on, time sync good, logs capped, direnv wired, Docker enabled. TODO items tracked separately.

People / Access
- Owner: user `shit` (sudo-enabled). SSH reachable on port 22. Key auth recommended; password auth not yet hardened (see TODO).
- Agent: this assistant has been configuring per your requests; no unattended actions outside of what’s documented here.

System At A Glance
- OS: Ubuntu 24.04 (Noble) — kernel per `~/system-info.txt`.
- CPU/RAM: 3 vCPU, 8 GiB RAM; Swap: 0 GiB (see TODO to add 2–4 GiB).
- Disk: 145G total; ~140G free on `/`.
- Time sync: systemd-timesyncd active and synchronized.

Network + Services
- UFW: enabled. Default deny incoming; allow 22/tcp, 80/tcp, 443/tcp; SSH rate‑limited.
- Listening: sshd (22), nginx (80), postgres (127.0.0.1:5432), redis (127.0.0.1:6379), local DNS stubs (53 on loopback).
- Certbot: installed; renewal timer present.

Security Posture
- Fail2ban: enabled/active (default jail). UFW active with sane defaults.
- SSH: not hardened yet (passwords still permitted). Task tracked in `~/TODOLIST.md`.
- Unattended upgrades: enabled via 20auto-upgrades; service active.
- Journald: capped to ~200MB total (50MB per file) to prevent log bloat.

Containers / Runtimes
- Docker: service enabled; user `shit` added to `docker` group (requires new shell/session to take effect). Containerd present.

Developer QoL
- Installed: ripgrep (rg), fd (fdfind), bat, ncdu, eza, tree, tldr, btop, net-tools, traceroute, dnsutils.
- direnv: installed and hooked into `~/.bashrc` (activate via new shell or `source ~/.bashrc`).

Backups
- Not yet configured. A complete restic setup (service + timer) is outlined in `~/TODOLIST.md`.

Nginx
- Running on :80. Hardenings (security headers, gzip, TLS params, optional rate limits) documented in `~/TODOLIST.md`.

Artifacts / References
- Package and tool lists: `~/installed-packages-all.txt`, `~/installed-packages-user.txt`, `~/tool-versions.txt`.
- System info: `~/system-info.txt`.
- TODOs and deferred work: `~/TODOLIST.md`.

Recent Changes (this entry)
- Installed utilities; added fd/bat symlinks.
- Enabled and configured UFW (22/80/443; rate-limit 22).
- Enabled unattended upgrades (daily) and verified timers.
- Enabled time sync (systemd-timesyncd), verified sync.
- Capped journald size to ~200MB and restarted service.
- Installed direnv and added shell hook to `~/.bashrc`.
- Enabled Docker and added user `shit` to `docker` group.

Next Review
- When any service, port, or security posture changes, add a new entry above this one with the same section structure.
