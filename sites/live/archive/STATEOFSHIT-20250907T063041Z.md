============================================================
Entry: 2025-09-07T02:30:41-04:00
============================================================

Summary
- Added a Dashboard Guide page covering all .rest features (home, config, files, cheat docs, auth, tips).
- Collected additional UX ideas into TODOLIST.md under a new 'dashboard polish and UX' section.

Artifacts / References
- Guide: /var/www/stateofshit-rest/dashboard.html
- TODOs: ~/TODOLIST.md (new ideas section)

============================================================
Entry: 2025-09-07T02:29:08-04:00
============================================================

Summary
- File Explorer overhaul: added sortable table listing, back/forward via URL hash, New Folder/Rename/Delete/Upload actions, '..' entry, and uploads to current path.

Artifacts / References
- Files UI: /var/www/stateofshit-rest/files.html

============================================================
Entry: 2025-09-07T02:27:25-04:00
============================================================

Summary
- Standardized a common nav bar across .rest pages (Dashboard, Config, Files, Cheat Docs, Docs, GPT Guide, Status).

Artifacts / References
- Updated headers: index.html, config.html, files.html, cheatsheet.html under /var/www/stateofshit-rest

============================================================
Entry: 2025-09-07T02:25:30-04:00
============================================================

Summary
- Improved Files explorer: added Root/Up navigation and clickable breadcrumbs to quickly move around the box.

Artifacts / References
- Files UI: /var/www/stateofshit-rest/files.html

============================================================
Entry: 2025-09-07T02:22:45-04:00
============================================================

Summary
- Added a dedicated Cheat Sheet Docs page with 'what/why' and basic/advanced examples for each command.
- Linked each command in the dashboard Cheat Sheet to its section.

Artifacts / References
- Docs: /var/www/stateofshit-rest/cheatsheet.html
- Dashboard: /var/www/stateofshit-rest/index.html (Cheat Sheet command links)

============================================================
Entry: 2025-09-07T02:20:54-04:00
============================================================

Summary
- Cheat Sheet improved with per-command inputs that inject values into copied curl commands (path, local file, key, etc.).

Artifacts / References
- Dashboard updated: /var/www/stateofshit-rest/index.html

============================================================
Entry: 2025-09-07T02:18:26-04:00
============================================================

Summary
- Enhanced Cheat Sheet: added publish target and public root dropdowns, path existence check with status dot, and Expand/Collapse All.

Artifacts / References
- Dashboard updated: /var/www/stateofshit-rest/index.html

============================================================
Entry: 2025-09-07T02:15:33-04:00
============================================================

Summary
- Added a Cheat Sheet card on .rest dashboard with Hosted/Local base selector, inline path inputs, and copy buttons for key curl commands.

Artifacts / References
- Dashboard updated: /var/www/stateofshit-rest/index.html

============================================================
Entry: 2025-09-07T02:12:13-04:00
============================================================

Summary
- Expanded GPT_API.md with best practices for GPTs: planning, retries/backoff, path safety, upload guidance, and JS/Python examples.

Artifacts / References
- ~/GPT_API.md (updated) and published copy at /var/www/stateofshit-rest/GPT_API.md

============================================================
Entry: 2025-09-07T02:10:59-04:00
============================================================

Summary
- Added 'GPT Guide' button on .rest dashboard linking to /GPT_API.md (behind Basic).

Artifacts / References
- Dashboard: /var/www/stateofshit-rest/index.html
- GPT guide: /var/www/stateofshit-rest/GPT_API.md (source at ~/GPT_API.md)

============================================================
Entry: 2025-09-07T02:10:10-04:00
============================================================

Summary
- Added GPT_API.md with concrete, copyable examples for every endpoint and typical flows (upload→publish, signed URLs).

Artifacts / References
- GPT guide: ~/GPT_API.md
- API base (hosted): https://stateofshit.rest/api (Basic Auth)
- API base (local): http://127.0.0.1:8001/api (no Basic)

============================================================
Entry: 2025-09-07T02:03:21-04:00
============================================================

Summary
- Added 'Docs' button on .rest dashboard linking to /api/openapi.json (opens in new tab).

Artifacts / References
- Dashboard updated: /var/www/stateofshit-rest/index.html.
- OpenAPI (live): https://stateofshit.rest/api/openapi.json; local: http://127.0.0.1:8001/api/openapi.json; copy at ~/code/openapi.json.

============================================================
Entry: 2025-09-07T02:00:04-04:00
============================================================

Summary
- Implemented .rest Endpoint Configurator (/config) with presets (GET/PUT /api/presets).
- Added Files manager (/files.html): tree, upload to staging, edit, tags, publish quick actions, audit tail.
- Added read-only viewer routes: .live /files/* → /srv/box/public-live, .space /files/* → /srv/box/public-space.
- Reskinned .live to a terminal theme and added Archive link.
- Security: signed URL path allowlist for public-only paths; API upload cap set to 1 GB.

Network + Services
- Nginx vhosts updated for stateofshit.live and stateofshit.space to add /files alias blocks (no listings). Reloaded after nginx -t.
- API extended: GET/PUT /api/presets, POST /api/fs/copy, POST /api/fs/publish, GET /api/audit/tail.

Artifacts / References
- REST dashboard: /var/www/stateofshit-rest/index.html with links to /config.html and /files.html.
- Configurator: /var/www/stateofshit-rest/config.html (uses /api/presets).
- Files UI: /var/www/stateofshit-rest/files.html (uses /api/fs/* + /api/audit/tail).
- Viewer roots: /srv/box/public-live and /srv/box/public-space exposed under /files on their domains.
- API env: /etc/stateofshit/api.env updated (MAX_UPLOAD_MB=1024, BOX_ROOT=/srv/box, SIGNED_URL_ALLOW).

Notes
- To feature content on .space, set /srv/box/public-space/_show.json to {"path": "relative/file"}.
- Signed URLs now restricted to ^/(public-live|public-space)/; adjust SIGNED_URL_ALLOW in /etc/stateofshit/api.env if needed.

# STATE OF SHIT

This file tracks the live state of the VPS, who’s doing what, and notable changes. It’s meant to be updated often with concise entries.

— Standard —
- Keep entries short, timestamped, and factual.
- Use the same sections for each entry so it’s easy to scan.
- Don’t repeat TODO items here; they live in `~/TODOLIST.md`.
- When something changes, add a new entry at the top.

============================================================
Entry: 2025-09-06T18:46:17-04:00
============================================================

Summary
- Added Signed URL feature and JSON base64 file reads to the API. Increased upload caps to 1 GB. Exported OpenAPI to . Added a “Signed URL” button on the .rest dashboard.

Network + Services
-  vhost updated with  and an auth‑off location for .
- API extended with , , .

Artifacts / References
- OpenAPI copy:  (live JSON also at ).
- Dashboard UI: “Signed URL” generator on .
- Config:  in ; box limits in .

============================================================
Entry: 2025-09-06T18:08:34-04:00
============================================================

Summary
- stateofshit.space is now public with a simple "Coming Soon" landing page. Removed Basic Auth from .space only. HTTPS + redirect remain.

Network + Services
- Updated vhost `/etc/nginx/sites-available/stateofshit.space` (no auth; ACME path open; HTTP→HTTPS redirect).

Artifacts / References
- Landing page: `/var/www/stateofshit-space/index.html`.
- Domains overview updated: `~/DOMAINS.md`.

============================================================
Entry: 2025-09-06T17:38:08-04:00
============================================================

Summary
- Issued TLS for stateofshit.space (root + www). stateofshit.rest: root now points here, but www still points elsewhere; cert deferred until both A records land.

Network + Services
- New vhost for stateofshit.space with a holding page at `/var/www/stateofshit-space`. HTTPS enabled, HTTP→HTTPS redirect via Certbot.
- stateofshit.rest dashboard vhost already live on :80; waiting for DNS of `www.stateofshit.rest` to repoint before issuing cert.

Artifacts / References
- space vhost: `/etc/nginx/sites-available/stateofshit.space`; webroot: `/var/www/stateofshit-space`.
- Domains overview updated: `~/DOMAINS.md`.

Next Steps
- Update DNS so `www.stateofshit.rest` resolves to 147.93.183.152, then run:
  `sudo certbot --nginx -d stateofshit.rest -d www.stateofshit.rest --redirect`

============================================================
Entry: 2025-09-06T17:31:32-04:00
============================================================

Summary
- Public site deployed at https://stateofshit.live with HTTPS via Let’s Encrypt. Nginx serves a styled HTML that renders this Markdown.

Publishing Notes
- Edit source: `~/STATEOFSHIT.md`
- Publish to web: `sudo install -m 0644 ~/STATEOFSHIT.md /var/www/stateofshit/STATEOFSHIT.md`
- The site fetches the Markdown on load; click “Refresh” in the header or reload the page to see updates.
- If needed later, we can automate publishing with a systemd path trigger that copies on change.

System At A Glance (unchanged from prior unless noted)
- Domain: stateofshit.live (and www) — HTTPS enabled, HTTP→HTTPS redirect.
- Web root: `/var/www/stateofshit` (assets and index); Markdown served as plain text at `/STATEOFSHIT.md`.

Recent Changes (this entry)
- Issued and installed TLS cert; enabled redirect to HTTPS.
- Fixed an initial redirect loop by correcting `try_files`.
- Switched the Markdown to a regular file in webroot (no symlink) to avoid 403; added publish command above.

============================================================
Entry: 2025-09-06T17:35:43-04:00
============================================================

Summary
- Prepared `stateofshit.rest` as the main API dashboard (static for now) with Nginx. DNS not yet pointing here; cert pending until DNS cutover.

People / Access
- Same as prior entries. No changes to SSH or users.

System At A Glance
- Added webroot `/var/www/stateofshit-rest` and vhost `/etc/nginx/sites-available/stateofshit.rest` (enabled).

Network + Services
- New site on port 80 for `stateofshit.rest` and `www.stateofshit.rest`.
- Stub endpoints served by Nginx:
  - GET /api/health → 200 {"status":"ok"}
  - GET /api/version → 200 {name, version}

Security Posture
- Reuses existing security/gzip snippets. TLS to be issued after DNS points to this VPS.

Artifacts / References
- Dashboard root: `/var/www/stateofshit-rest/index.html`
- Vhost: `/etc/nginx/sites-available/stateofshit.rest`
- Domains overview: `~/DOMAINS.md`

Next Steps
- Point A and www A for `stateofshit.rest` to 147.93.183.152, then issue TLS with:
  `sudo certbot --nginx -d stateofshit.rest -d www.stateofshit.rest --redirect`

============================================================
Entry: 2025-09-06T17:14:08-04:00
============================================================

Summary
- Fresh VPS baseline complete. Core utilities installed, firewall active, auto updates on, time sync good, logs capped, direnv wired, Docker enabled. TODO items tracked separately.

People / Access
- Owner: user `shit` (sudo-enabled). SSH reachable on port 22. Key auth recommended; password auth not yet hardened (see TODO).
- Agent: this assistant has been configuring per your requests; no unattended actions outside of what’s documented here.

System At A Glance
- OS: Ubuntu 24.04 (Noble) — kernel per `~/system-info.txt`.
- CPU/RAM: 3 vCPU, 8 GiB RAM; Swap: 0 GiB (see TODO to add 2–4 GiB).
- Disk: 145G total; ~140G free on `/`.
- Time sync: systemd-timesyncd active and synchronized.

Network + Services
- UFW: enabled. Default deny incoming; allow 22/tcp, 80/tcp, 443/tcp; SSH rate‑limited.
- Listening: sshd (22), nginx (80), postgres (127.0.0.1:5432), redis (127.0.0.1:6379), local DNS stubs (53 on loopback).
- Certbot: installed; renewal timer present.

Security Posture
- Fail2ban: enabled/active (default jail). UFW active with sane defaults.
- SSH: not hardened yet (passwords still permitted). Task tracked in `~/TODOLIST.md`.
- Unattended upgrades: enabled via 20auto-upgrades; service active.
- Journald: capped to ~200MB total (50MB per file) to prevent log bloat.

Containers / Runtimes
- Docker: service enabled; user `shit` added to `docker` group (requires new shell/session to take effect). Containerd present.

Developer QoL
- Installed: ripgrep (rg), fd (fdfind), bat, ncdu, eza, tree, tldr, btop, net-tools, traceroute, dnsutils.
- direnv: installed and hooked into `~/.bashrc` (activate via new shell or `source ~/.bashrc`).

Backups
- Not yet configured. A complete restic setup (service + timer) is outlined in `~/TODOLIST.md`.

Nginx
- Running on :80. Hardenings (security headers, gzip, TLS params, optional rate limits) documented in `~/TODOLIST.md`.

Artifacts / References
- Package and tool lists: `~/installed-packages-all.txt`, `~/installed-packages-user.txt`, `~/tool-versions.txt`.
- System info: `~/system-info.txt`.
- TODOs and deferred work: `~/TODOLIST.md`.

Recent Changes (this entry)
- Installed utilities; added fd/bat symlinks.
- Enabled and configured UFW (22/80/443; rate-limit 22).
- Enabled unattended upgrades (daily) and verified timers.
- Enabled time sync (systemd-timesyncd), verified sync.
- Capped journald size to ~200MB and restarted service.
- Installed direnv and added shell hook to `~/.bashrc`.
- Enabled Docker and added user `shit` to `docker` group.

Next Review
- When any service, port, or security posture changes, add a new entry above this one with the same section structure.
